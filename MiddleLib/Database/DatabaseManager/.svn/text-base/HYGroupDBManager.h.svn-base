//
//  HYGroupDBManager.h
//  iRCS
//
//  Created by 王斌 on 15/8/28.
//  Copyright (c) 2015年 frank weng. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "GroupDBModel.h"
#import "HYDatabaseHelper.h"
#import "HYFMDatabase.h"
#import "HYFMDatabaseQueue.h"

@interface HYGroupDBManager : NSObject

// 用于数据操作的管理队列
@property (nonatomic, strong) HYFMDatabaseQueue *databaseQueue;
// 用于获取数据的数据库
@property (nonatomic, strong) HYFMDatabase *database;

- (void)setup;
+ (HYGroupDBManager *)defaultManager;
#pragma mark 增
/**
 *  根据表的名字和参数创建表
 *
 *  @param table 表的名字
 *  @param param 表的“字段”和“属性”组成的字典，都是NSString类型
 *
 *  @return 是否创建成功
 */
//- (BOOL)createTableWithParam:(NSDictionary *)param;

/**
 *  使用默认参数创建数据表
 *
 *  @return 是否成功
 */
- (BOOL)createTable;

/**
 *  添加一条群组记录
 *
 *  @param groupModel 群组数据
 *
 *  @return 是否成功
 */
- (BOOL)addGroupInDBWithModel:(GroupDBModel *)groupModel;

///**
// *  增加一条群组记录（收到创建群通知时使用,不更新会话）
// *
// *  @param uuid 群号
// */
//- (void)newGroupInDBWithConversationUUID:(NSString *)uuid;



#pragma mark 查

/**
 *  查找所有群组信息
 *
 *  @return 群组Array
 */
- (NSMutableArray *)getAllGroupInDB;

/**
 *  群信息是否存在
 *
 *  @param groupID 群号
 *
 *  @return 是否存在
 */
- (BOOL)isGroupExistWithGroupID:(NSString *)groupID;

/**
 *  获取指定群组信息
 *
 *  @param groupID 群组ID
 *
 *  @return 群组信息
 */
- (GroupDBModel *)getGroupInDBWithGroupID:(NSString *)groupID;

///**
// *  获取群聊中所有成员的ID
// *
// *  @param groupID 群聊的ID，群聊表中的主键值
// *
// *  @return 成员ID列表,以逗号隔开
// */
//-(NSString *)getGroupMemberIDInDBWithGroupID:(NSString *)groupID;

#pragma mark 改
/**
 * 更新群模型
 *
 *  @param group 群模型
 *
 *  @return 是否成功
 */
- (BOOL)updateGroupInDB:(GroupDBModel *)group;

/**
 *  修改群名称
 */
- (BOOL) updateGroupNameWithGroupID:(NSString *)groupID NewGroupName:(NSString *)groupName;

/**
 *  更换群主
 *
 *  @param newMasterID 新群主ID
 *  @param groupID     群号
 *
 *  @return 是否成功
 */
- (BOOL)updateGroupMaster:(NSString *)newMasterID GroupID:(NSString *)groupID;

/**
 *  更新是否退出群
 */
- (BOOL)updateGroupIsQuit:(BOOL)isQuit GroupID:(NSString *)groupID;

#pragma mark 删
/**
 *  删除指定群组
 *
 *  @param groupID 群组ID
 *
 *  @return 是否成功
 */
- (BOOL)deleteGroupInDBWithGroupID:(NSString *)groupID;


@end
